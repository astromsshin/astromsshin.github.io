<!DOCTYPE html>
<html lang="en">
<head>
        <title>Tech and data blog - bluetooth</title>
        <meta charset="utf-8" />
        <meta name="generator" content="Pelican" />
        <meta name="author" content="astromsshin" />
        <meta name="copyright" content="astromsshin" />
        <meta name="robots" content="noindex,follow">

        <link rel="stylesheet" href="https://astromsshin.github.io/blog/theme/css/main.css" type="text/css" />

        <!--[if IE]>
                <script src="https://html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->

        <!--[if lte IE 7]>
                <link rel="stylesheet" type="text/css" media="all" href="https://astromsshin.github.io/blog/css/ie.css"/>
                <script src="https://astromsshin.github.io/blog/js/IE8.js" type="text/javascript"></script><![endif]-->

        <!--[if lt IE 7]>
                <link rel="stylesheet" type="text/css" media="all" href="https://astromsshin.github.io/blog/css/ie6.css"/><![endif]-->

</head>

<body id="index" class="home">
        <header id="banner" class="body">
                <h1><a href="https://astromsshin.github.io/blog">Tech and data blog </a></h1>
                <nav>
                    <a href="https://astromsshin.github.io/blog/category/data-model.html">Data & Model</a>&nbsp;
                    <a href="https://astromsshin.github.io/blog/category/diy.html">DIY</a>&nbsp;
                    <a href="https://astromsshin.github.io/blog/category/tech.html">Tech</a>&nbsp;
                </nav>
        </header><!-- /#banner -->
        
        

            <aside id="featured" class="body">
                <article>
                    <h1 class="entry-title"><a href="https://astromsshin.github.io/blog/old_phone_1.html">구형 스마트폰 활용(1): 인터넷 라디오+블루투스+스피커+home dashboard</a></h1> 
<footer class="post-info">
        <abbr class="published" title="2021-07-02T23:04:00+09:00">
                금 02 7월 2021
        </abbr>
<p>tags: <a href="https://astromsshin.github.io/blog/tag/lg-g4.html">LG G4</a><a href="https://astromsshin.github.io/blog/tag/bluetooth.html">bluetooth</a><a href="https://astromsshin.github.io/blog/tag/dashboard.html">dashboard</a><a href="https://astromsshin.github.io/blog/tag/f-droid.html">f-droid</a></p></footer><!-- /.post-info --><p>구형 스마트폰을 활용하는 방법들을 주변 사람들에게 종종 소개했었는데, 
여기에서는 그 첫번째 경우로 구형 <a href="https://en.wikipedia.org/wiki/LG_G4">LG G4</a>를 활용하여 
인터넷 라디오나 음악을 듣고, 동시에 시각, 일반적인 기상/미세먼지 상황 등을 
확인할 수 있는 home dashboard를 표출하는 경우를 소개한다.</p>
<p>우선 LG G4의 기존 Android OS를 활용하면서, 웹이나 앱으로 인터넷 라디오나 
음악을 들을 수 있다. 이를 집에서 유용하게 쓰기 위해서, 기존의 오래된 
스피커에 <a href="http://prod.danawa.com/info/?pcode=10986051#bookmark_product_information">블루투스 USB 오디오 동글 리시버</a>를 
AUX로 연결하고, G4의 블루투스 연결을 통하여 일반 스피커를 블루투스 스피커로 
만들어서 활용한다.</p>
<p>집에서는 인터넷 라디오를 거의 항시 틀어 놓고 있어서, G4를 
home dashboard 기능도 하도록 하였다. 이를 위해서, 적절한 공간에 
web page를 구성하고, 자동으로 최신 정보가 해당 웹 페이지로 표출되도록 
구성을 한다. 아래는 그러한 웹 페이지를 보여준다.
아주 단순하게 
HTML의 <a href="https://www.geeksforgeeks.org/how-to-automatic-refresh-a-web-page-in-fixed-time/">meta heep-equiv tag의 refresh</a>를 
이용하여 해당 웹 페이지를 정기적으로 갱신해서 표출하도록 해줄 수 있다.</p>
<div class="highlight"><pre><span></span><code>  <span class="cp">&lt;!DOCTYPE html&gt;</span>
  <span class="nt">&lt;html&gt;</span>

  <span class="nt">&lt;head&gt;</span>
    <span class="nt">&lt;meta</span> <span class="na">charset=</span><span class="s">&quot;utf-8&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;meta</span> <span class="na">name=</span><span class="s">&quot;viewport&quot;</span> <span class="na">content=</span><span class="s">&quot;width=device-width, initial-scale=1.0&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;meta</span> <span class="na">http-equiv=</span><span class="s">&quot;refresh&quot;</span> <span class="na">content=</span><span class="s">&quot;240&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;meta</span> <span class="na">http-equiv=</span><span class="s">&quot;Pragma-directive&quot;</span> <span class="na">content=</span><span class="s">&quot;no-cache&quot;</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;meta</span> <span class="na">http-equiv=</span><span class="s">&quot;Expires&quot;</span> <span class="na">content=</span><span class="s">&quot;0&quot;</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;title&gt;</span>Current status<span class="p">&lt;/</span><span class="nt">title</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">style</span><span class="p">&gt;</span><span class="w"></span>
<span class="w">    </span><span class="p">#</span><span class="nn">clock</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">      </span><span class="k">color</span><span class="p">:</span><span class="w"> </span><span class="kc">white</span><span class="p">;</span><span class="w"></span>
<span class="w">      </span><span class="k">align-items</span><span class="p">:</span><span class="w"> </span><span class="kc">center</span><span class="p">;</span><span class="w"></span>
<span class="w">      </span><span class="k">justify-content</span><span class="p">:</span><span class="w"> </span><span class="kc">center</span><span class="p">;</span><span class="w"></span>
<span class="w">      </span><span class="k">font-size</span><span class="p">:</span><span class="w"> </span><span class="mi">100</span><span class="kt">px</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="p">&lt;/</span><span class="nt">style</span><span class="p">&gt;</span>
  <span class="p">&lt;/</span><span class="nt">head</span><span class="p">&gt;</span>

  <span class="nt">&lt;body</span> <span class="na">style=</span><span class="s">&quot;background-color:black;&quot;</span><span class="nt">&gt;</span>

  <span class="nt">&lt;center&gt;</span>
  <span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">&quot;clock&quot;</span><span class="nt">&gt;</span><span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">script</span><span class="p">&gt;</span><span class="w"></span>
<span class="w">    </span><span class="kd">function</span><span class="w"> </span><span class="nx">clock</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">      </span><span class="kd">let</span><span class="w"> </span><span class="nx">date</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nb">Date</span><span class="p">();</span><span class="w"></span>
<span class="w">      </span><span class="kd">let</span><span class="w"> </span><span class="nx">hrs</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">date</span><span class="p">.</span><span class="nx">getHours</span><span class="p">();</span><span class="w"></span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="nx">mins</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">date</span><span class="p">.</span><span class="nx">getMinutes</span><span class="p">();</span><span class="w"></span>

<span class="w">    </span><span class="nx">hrs</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">hrs</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mf">10</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="sb">`0</span><span class="si">${</span><span class="nx">hrs</span><span class="si">}</span><span class="sb">`</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="nx">hrs</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="nx">mins</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">mins</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mf">10</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="sb">`0</span><span class="si">${</span><span class="nx">mins</span><span class="si">}</span><span class="sb">`</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="nx">mins</span><span class="p">;</span><span class="w"></span>

<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="nx">time</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="sb">`</span><span class="si">${</span><span class="nx">hrs</span><span class="si">}</span><span class="sb">:</span><span class="si">${</span><span class="nx">mins</span><span class="si">}</span><span class="sb">`</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="nx">setInterval</span><span class="p">(</span><span class="nx">clock</span><span class="p">,</span><span class="w"> </span><span class="mf">20000</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s2">&quot;clock&quot;</span><span class="p">).</span><span class="nx">innerText</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">time</span><span class="p">;</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>
<span class="w">  </span><span class="nx">clock</span><span class="p">();</span><span class="w"></span>
<span class="w">  </span><span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
  <span class="nt">&lt;img</span> <span class="na">name=</span><span class="s">&quot;img1&quot;</span> <span class="na">src=</span><span class="s">&quot;./negate-pm_use.png&quot;</span><span class="nt">&gt;</span>
  <span class="nt">&lt;br&gt;</span>
  <span class="nt">&lt;img</span> <span class="na">name=</span><span class="s">&quot;img2&quot;</span> <span class="na">src=</span><span class="s">&quot;./negate-weather_use.png&quot;</span><span class="nt">&gt;</span>
  <span class="nt">&lt;br&gt;</span>
  <span class="nt">&lt;img</span> <span class="na">name=</span><span class="s">&quot;img3&quot;</span> <span class="na">src=</span><span class="s">&quot;./negate-weather_radar_use.png&quot;</span><span class="nt">&gt;</span> <span class="nt">&lt;img</span> <span class="na">name=</span><span class="s">&quot;img4&quot;</span> <span class="na">src=</span><span class="s">&quot;./negate-weather_aws_rain_use.png&quot;</span><span class="nt">&gt;</span>
  <span class="nt">&lt;br&gt;</span>
  <span class="nt">&lt;img</span> <span class="na">name=</span><span class="s">&quot;img5&quot;</span> <span class="na">src=</span><span class="s">&quot;./negate-weather_forecast_use.png&quot;</span><span class="nt">&gt;</span>
  <span class="nt">&lt;br&gt;</span>
  <span class="nt">&lt;img</span> <span class="na">name=</span><span class="s">&quot;img6&quot;</span> <span class="na">src=</span><span class="s">&quot;./negate-weather_satellite_use.png&quot;</span><span class="nt">&gt;</span> <span class="nt">&lt;img</span> <span class="na">name=</span><span class="s">&quot;img7&quot;</span> <span class="na">src=</span><span class="s">&quot;./negate-weather_aws_temp_use.png&quot;</span><span class="nt">&gt;</span>
  <span class="p">&lt;/</span><span class="nt">center</span><span class="p">&gt;</span>

  <span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>

  <span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span>
</code></pre></div>

<p>첫번 째 표출되는 것은 현재 시각으로, 간단한 javascript를 활용한다. 
전력 사용량을 줄이기 위하여, 배경을 검은색으로 하는 것으로 구성하였다.</p>
<p>크롬 브라우저나 파이어폭스 브라우저를 이용해서 실험을 했을 때, 해당 브라우저들의 
전력 사용량이 위와 같은 간단한 경우에도 매우 큰 것을 확인 할 수 있었다. 이로 
인하여 G4의 온도가 꽤 높게 상승하는 것을 발견하였다. 따라서 다른 대안이 필요했다.</p>
<p>전력 사용량을 줄이면서 가볍게 웹기반의 home dashboard를 위해서 선택한 방법은, 
<a href="https://f-droid.org/">F-Droid</a>를 통해서 이용이 가능한 open source 프로그램인
<a href="https://f-droid.org/en/packages/com.tobykurien.webapps/">WebApps Sandboxed Browser</a>을 
이용하는 것이다. 이 경우 전체화면으로 home dashboard를 표출하는 것 등이 손 쉽게 
가능하며, 마치 하나의 앱처럼 구성하는 것도 용이하다. 그리고 무엇보다도 G4의 
온도 상승이 미미한 것을 확인할 수 있었다. 이는 내부적으로 Android System WebView를 
이용하기 때문인 것으로 추정한다.</p>
<p>F-Droid를 통해서 추가로 설치 한 것 중에는 <a href="https://f-droid.org/en/packages/org.schabi.newpipe/">NewPipe</a>가 
있다. Youtube에서 원하는 비디오를 음악 파일로 만들어서 저장해서 활용하는데 활용하고 
있다.</p>                </article>
<p class="paginator">
    Page 1 / 1
</p>
            </aside><!-- /#featured -->
            </ol><!-- /#posts-list -->
            </section><!-- /#content -->
        <section id="extras" class="body">
        </section><!-- /#extras -->

        <footer id="contentinfo" class="body">
                <address id="about" class="vcard body">
                     Proudly powered by <a href="http://getpelican.com/">Pelican</a>, which takes great advantage of <a href="https://www.python.org/">Python</a>. Theme is using <a href="https://github.com/getpelican/pelican-themes" target="_blank">cebong</a>.
                </address><!-- /#about -->

        </footer><!-- /#contentinfo -->

</body>
</html>